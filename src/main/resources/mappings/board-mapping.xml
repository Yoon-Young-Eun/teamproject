<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="BoardDAO">

	<resultMap type="notice" id="noticeResult">
		<id property="notice_no" column="notice_no" />
		<result property="notice_title" column="notice_title"/>
		<result property="notice_content" column="notice_content"/>
		<result property="notice_reg_date" column="notice_reg_date"/>
	</resultMap>
	
	<select id="getBoardList" resultMap="noticeResult">
		<![CDATA[ select * from notice ]]>
	</select>

	<insert id="insertBoard" parameterType="notice">
		<![CDATA[ insert into notice(notice_title, notice_content, notice_reg_date, admin_id) 
		values #{notice_title}, #{notice_content}, #{notice_reg_date}, #{admin_id} ]]>
	</insert>

	<update id="updateBoard" parameterType="notice">
		<![CDATA[ update notice set
		notice_title=#{notice_title}, notice_content=#{notice_content} where noitce_no=#{notice_no} ]]>
	</update>

	<delete id="deleteBoard" parameterType="notice">
		<![CDATA[ delete from notice where noitce_no=#{noitce_no} ]]>
	</delete>

	<select id="getBoard" resultType="notice"> 
 		<![CDATA[ select notice_title, notice_content, notice_reg_date from notice where noitce_no=#{noitce_no} ]]>
	</select>

	<!-- 기존 <select id="getBoardList" resultMap="boardResult"> select * from 
		myboard where title like '%'||#{searchKeyword}||'%' order by num desc </select> 
		수정 ↓↓↓↓ -->

	<!-- Dynamic SQL -->
	<!-- <select id="getBoardList" resultMap="boardResult"> select * from tb_member 
		where 1=1 <if test="searchCondition=='member_address1'"> AND member_address1 
		like '%'||#{searchKeyword}||'%' order by num desc </if> <if test="searchCondition=='member_name'"> 
		AND member_name like '%'||#{searchKeyword}||'%' order by num desc </if> </select> 
		<select id="getArticleList2" parameterType="Map" resultType="Map"> <![CDATA[ 
		select * from(select rownum rnum, num, member_email,member_name, member_phone, 
		member_address1, member_address2,sns_approval, member_zipcode from (select 
		* from tb_member order by num))where rnum >= #{startRow} and rnum <= #{endRow}]]> 
		</select> <select id="getArticleList" parameterType="Map" resultType="Map"> 
		<![CDATA[ select * from(select rownum rnum, num, member_email,member_name, 
		member_phone, member_address1, member_address2,sns_approval, member_zipcode 
		from (select * from tb_member order by num )]]> <if test="searchCondition==null"> 
		<![CDATA[ )where rnum >= #{startRow} and rnum <= #{endRow} ]]> </if> <if 
		test="searchCondition=='member_address1'"> <![CDATA[where member_address1 
		like'%'||#{searchKeyword}||'%') where rnum >= #{startRow} and rnum <= #{endRow}]]> 
		</if> <if test="searchCondition=='member_name'"> <![CDATA[where member_name 
		like '%'||#{searchKeyword}||'%') where rnum >= #{startRow} and rnum <= #{endRow}]]> 
		</if> </select> -->

</mapper>
 